<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="/css/check-form.css">
    <title>Document</title>
</head>
<body>
    <h1>Kiểm tra vào khu học tập</h1>

    <form action="#"
          method="post"
          th:action="@{/thanhvien/check}"
          id="checkForm"
    >
        <input type="text"
               placeholder="Nhập mã sinh viên"
               name="tvId"
               th:name="tvId"
               th:value="${tvId}"
               id="tvIdInput"
        ><br>

        <div th:if="${check == 2}"
             id="welcome-message"
        >
            <p>Chào mừng <label th:text="${tv.ten}"></label> đến khu học tập</p>
        </div>

        <div th:if="${check == 1}">
            <p>Không tìm thấy thành viên</p>
        </div>

        <div th:if="${check == 3}">
            <p>Mã thành viên chỉ có chữ số và không chứa bất kỳ ký tự nào khác</p>
        </div>

        <div>
            <label id="message"></label>
        </div>

        <input type="submit" value="Kiểm tra"><br>

        <a th:href="@{/thanhvien/all}">Quay lại</a>
    </form>

    <div id="violation"
         th:if="${check == 4}"
    >
        <h3>Thành viên <label th:text="${tv.ten}"></label>, mã số: <label th:text="${tv.id}"></label> có những vị phạm sau đây chưa được xử lý</h3>

        <table class="table table-bordered table-striped table-hover">
            <thead class="table-dark">
                <tr>
                    <th>Lý do</th>
                    <th>Hình thức xử lý</th>
                    <th>Ngày xử lý</th>
                    <th>Tiền phạt</th>
                </tr>
            </thead>

            <tbody>
                <tr th:each="vp : ${dsXuly}">
                    <td th:text="${vp.lydo}"></td>
                    <td th:text="${vp.hinhthuc_xuly.hinhthuc}"></td>
                    <td th:text="${vp.ngay_xuly}"></td>
                    <td th:text="${vp.tienphat != null ? vp.tienphat : 'Không có'}"></td>
                </tr>
            </tbody>
    </div>

    <script>
        document.getElementById('checkForm').addEventListener('submit', function(event) {
            var tvIdInput = document.getElementById('tvIdInput');
            var tvId = tvIdInput.value;

            if (!Number.isInteger(Number(tvId))) {
                // document.getElementById('message').innerText = 'Mã thành viên phải là số.';
                alert('Mã thành viên phải là số.');
                $('#welcome-message').html('');
                event.preventDefault();
            }
        });
    </script>
</body>
</html>